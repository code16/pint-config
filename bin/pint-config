#!/usr/bin/env php
<?php


use Symfony\Component\Process\Process;
use Symfony\Component\Process\PhpSubprocess;

require $_composer_autoload_path ?? __DIR__.'/../../../autoload.php';

$rootDir = isset($_composer_autoload_path) ? dirname($_composer_autoload_path).'/..' : __DIR__.'/../../../..';

if(file_exists($rootDir.'/artisan')) {
    $process = new PhpSubprocess([$rootDir.'/artisan', 'pint-config:install']);
    $process->setTty(Process::isTtySupported());
    $process->run();
} else if(file_exists($rootDir.'/vendor/bin/testbench')) {
    $process = new Process([$rootDir.'/vendor/bin/testbench', 'pint-config:install']);
    $process->setTty(Process::isTtySupported());
    $process->run();
} else {
    echo "Pint-config: No artisan or testbench found. Please run this command in a Laravel or Testbench project.\n";
}
